<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gravice - 英文法ミニゲーム</title>

  <!-- Google Fonts: Noto Sans JP -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --saltwater: #257985;
      --lagoon: #5EA8A7;
      --whitewash: #FFFFFF;
      --raspberry: #FF4447;
    }

    body {
      margin: 0;
      font-family: 'Noto Sans JP', 'Arial', sans-serif;
      font-weight: 400;
      background-color: var(--whitewash);
      color: var(--saltwater);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      background-color: var(--saltwater);
      color: var(--whitewash);
      padding: 1rem;
      text-align: center;
    }

    header h1 {
      font-weight: 700;
      margin: 0;
    }

    .container {
      flex: 1;
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      text-align: center;
    }

    .title {
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .description {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      font-weight: 400;
    }

    .game-button {
      display: block;
      width: 90%;
      max-width: 300px;
      margin: 0.7rem auto;
      background-color: var(--lagoon);
      color: var(--whitewash);
      padding: 1rem;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
    }

    .game-button:hover {
      background-color: var(--raspberry);
      transform: scale(1.05);
    }

    .game-button:active {
      transform: scale(0.95);
    }

    .game-screen {
      display: none;
    }

    .visible {
      display: block;
    }

    #gameContent {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #question {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    #translation, #category {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--saltwater);
    }

    #answerInput {
      padding: 0.5rem;
      font-size: 1.1rem;
      width: 200px;
      margin-bottom: 1rem;
      border: 2px solid var(--saltwater);
      border-radius: 5px;
    }

    #feedback {
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--raspberry);
    }

    #score, #timer {
      font-size: 1.2rem;
      margin: 0.5rem;
    }

    #resultScreen {
      display: none;
      flex-direction: column;
      align-items: center;
    }

    @media (max-width: 600px) {
      .title {
        font-size: 2.2rem;
      }

      .description {
        font-size: 1rem;
      }

      .game-button {
        font-size: 1rem;
        padding: 0.9rem;
      }

      #question {
        font-size: 1.3rem;
      }

      #translation, #category {
        font-size: 1rem;
      }

      #answerInput {
        width: 150px;
      }
    }
  </style>
</head>
<body>

  <!-- クリック音（実際のファイルは必要に応じて用意） -->
  <audio id="click-sound" src="./sounds/click.mp3" preload="auto"></audio>

  <header>
    <h1>Gravice</h1>
    <p>ミニゲームで英文法を楽しく学ぼう！</p>
  </header>

  <div class="container" id="home">
    <div class="title">ゲームを選ぼう</div>
    <div class="description">好きなゲームを選んで、英文法力をアップしよう！</div>
    <button class="game-button" onclick="startGame('fillInBlank')">穴埋めタイムアタック</button>
    <button class="game-button" onclick="startGame('grammarSniper')">文法スナイパー</button>
    <button class="game-button" onclick="startGame('shuffleChallenge')">並び替えチャレンジ</button>
    <button class="game-button" onclick="startGame('trueFalse')">〇×判定ゲーム</button>
  </div>

  <div class="container game-screen" id="gameScreen">
    <div id="gameTitle" class="title"></div>
    <div id="gameContent" class="description">
      <div id="score">スコア: 0</div>
      <div id="timer">残り時間: 60秒</div>
      <div id="question"></div>
      <div id="translation"></div>
      <div id="category"></div>
      <input type="text" id="answerInput" placeholder="回答を入力" />
      <button class="game-button" onclick="checkAnswer()">回答</button>
      <div id="feedback"></div>
      <div id="resultScreen">
        <div id="resultMessage" class="description"></div>
        <button class="game-button" onclick="startGame('fillInBlank')">もう一度プレイ</button>
        <button class="game-button" onclick="goHome()">ホームに戻る</button>
      </div>
    </div>
  </div>

  <script>
    const clickSound = document.getElementById('click-sound');
    let score = 0;
    let timeLeft = 60;
    let timerId;
    let currentQuestion = null;

    // 問題データ（中学1〜3年の例文、日本語訳を追加）
    const questions = [
      // 中1: be動詞
      { sentence: "She ___ a student.", answer: "is", category: "be動詞", translation: "彼女は学生です。" },
      { sentence: "They ___ in the park.", answer: "are", category: "be動詞", translation: "彼らは公園にいます。" },
      { sentence: "I ___ happy today.", answer: "am", category: "be動詞", translation: "私は今日幸せです。" },
      { sentence: "___ he a teacher?", answer: "Is", category: "be動詞", translation: "彼は教師ですか？" },
      { sentence: "We ___ tired.", answer: "aren’t", category: "be動詞", translation: "私たちは疲れていません。" },
      // 中1: 一般動詞
      { sentence: "I ___ soccer every day.", answer: "play", category: "一般動詞", translation: "私は毎日サッカーをします。" },
      { sentence: "He ___ chocolate.", answer: "likes", category: "一般動詞", translation: "彼はチョコレートが好きです。" },
      { sentence: "___ she study English?", answer: "Does", category: "一般動詞", translation: "彼女は英語を勉強しますか？" },
      { sentence: "We ___ watch TV.", answer: "don’t", category: "一般動詞", translation: "私たちはテレビを見ません。" },
      { sentence: "They ___ their grandparents on Sundays.", answer: "visit", category: "一般動詞", translation: "彼らは日曜日に祖父母を訪ねます。" },
      // 中1: 疑問文・否定文の作り方
      { sentence: "___ you like pizza?", answer: "Do", category: "疑問文・否定文", translation: "あなたはピザが好きですか？" },
      { sentence: "She ___ go to school on weekends.", answer: "doesn’t", category: "疑問文・否定文", translation: "彼女は週末に学校に行きません。" },
      { sentence: "___ it raining now?", answer: "Is", category: "疑問文・否定文", translation: "今、雨が降っていますか？" },
      { sentence: "He ___ coming to the party.", answer: "isn’t", category: "疑問文・否定文", translation: "彼はパーティーに来ません。" },
      { sentence: "___ Tom play tennis?", answer: "Does", category: "疑問文・否定文", translation: "トムはテニスをしますか？" },
      // 中1: 代名詞・命令文・感嘆文
      { sentence: "___ me the book.", answer: "Give", category: "命令文", translation: "その本を私にください。" },
      { sentence: "___ a beautiful flower!", answer: "What", category: "感嘆文", translation: "なんて美しい花でしょう！" },
      { sentence: "This is ___ bag.", answer: "my", category: "代名詞", translation: "これは私のバッグです。" },
      { sentence: "___ run in the classroom.", answer: "Don’t", category: "命令文", translation: "教室で走らないで。" },
      { sentence: "___ cute the puppy is!", answer: "How", category: "感嘆文", translation: "その子犬、なんてかわいいんだ！" },
      // 中1: 現在進行形・can
      { sentence: "I ___ reading a book now.", answer: "am", category: "現在進行形", translation: "私は今、本を読んでいます。" },
      { sentence: "She ___ swim very well.", answer: "can", category: "can", translation: "彼女はとても上手に泳げます。" },
      { sentence: "They ___ playing soccer in the park.", answer: "are", category: "現在進行形", translation: "彼らは公園でサッカーをしています。" },
      { sentence: "___ you help me?", answer: "Can", category: "can", translation: "私を助けられますか？" },
      { sentence: "He ___ running fast.", answer: "is", category: "現在進行形", translation: "彼は速く走っています。" },
      // 中1: 短縮形・複数形
      { sentence: "___ a student.", answer: "I’m", category: "短縮形", translation: "私は学生です。" },
      { sentence: "There are two ___ in the house.", answer: "cats", category: "複数形", translation: "家に猫が2匹います。" },
      { sentence: "She ___ like coffee.", answer: "doesn’t", category: "短縮形", translation: "彼女はコーヒーが好きではありません。" },
      { sentence: "I have three ___.", answer: "books", category: "複数形", translation: "私は本を3冊持っています。" },
      { sentence: "They ___ here.", answer: "aren’t", category: "短縮形", translation: "彼らはここにいません。" },
      // 中2: 過去形
      { sentence: "I ___ to the zoo yesterday.", answer: "went", category: "過去形", translation: "昨日、動物園に行きました。" },
      { sentence: "She ___ a new dress.", answer: "bought", category: "過去形", translation: "彼女は新しいドレスを買いました。" },
      { sentence: "Did you ___ the movie?", answer: "see", category: "過去形", translation: "その映画を見ましたか？" },
      { sentence: "We ___ play soccer last week.", answer: "didn’t", category: "過去形", translation: "先週、私たちはサッカーをしませんでした。" },
      { sentence: "He ___ tired after school.", answer: "was", category: "過去形", translation: "彼は学校の後で疲れていました。" },
      // 中2: 未来表現
      { sentence: "I ___ call you later.", answer: "will", category: "未来表現", translation: "後であなたに電話します。" },
      { sentence: "She ___ going to visit her grandma tomorrow.", answer: "is", category: "未来表現", translation: "彼女は明日、祖母を訪ねるつもりです。" },
      { sentence: "___ you come to the party?", answer: "Will", category: "未来表現", translation: "あなたはパーティーに来ますか？" },
      { sentence: "They ___ going to study English tonight.", answer: "are", category: "未来表現", translation: "彼らは今夜、英語を勉強するつもりです。" },
      { sentence: "It ___ rain this afternoon.", answer: "will", category: "未来表現", translation: "今日の午後、雨が降るでしょう。" },
      // 中2: 助動詞
      { sentence: "You ___ finish your homework.", answer: "must", category: "助動詞", translation: "あなたは宿題を終わらせなければなりません。" },
      { sentence: "I ___ to clean my room.", answer: "have", category: "助動詞", translation: "私は部屋を掃除しなければなりません。" },
      { sentence: "She ___ be quiet in the library.", answer: "must", category: "助動詞", translation: "彼女は図書館で静かにしなければなりません。" },
      { sentence: "We ___ have to go to school tomorrow.", answer: "don’t", category: "助動詞", translation: "私たちは明日、学校に行かなくてもいいです。" },
      { sentence: "He ___ study harder.", answer: "should", category: "助動詞", translation: "彼はもっと一生懸命勉強すべきです。" },
      // 中2: 比較
      { sentence: "This book is ___ interesting than that one.", answer: "more", category: "比較", translation: "この本はあの本より面白いです。" },
      { sentence: "She is the ___ girl in the class.", answer: "tallest", category: "比較", translation: "彼女はクラスで一番背が高い女の子です。" },
      { sentence: "My bag is ___ than yours.", answer: "heavier", category: "比較", translation: "私のバッグはあなたのより重いです。" },
      { sentence: "This is the ___ beautiful park in the city.", answer: "most", category: "比較", translation: "これは市内で一番美しい公園です。" },
      { sentence: "He runs ___ than his brother.", answer: "faster", category: "比較", translation: "彼は兄より速く走ります。" },
      // 中2: 不定詞
      { sentence: "I want ___ learn English.", answer: "to", category: "不定詞", translation: "私は英語を学びたいです。" },
      { sentence: "This is a good book ___ read.", answer: "to", category: "不定詞", translation: "これは読むのに良い本です。" },
      { sentence: "She came here ___ meet her friend.", answer: "to", category: "不定詞", translation: "彼女は友達に会うためにここに来ました。" },
      { sentence: "He needs a pen ___ write with.", answer: "to", category: "不定詞", translation: "彼は書くためのペンが必要です。" },
      { sentence: "I study hard ___ pass the test.", answer: "to", category: "不定詞", translation: "私はテストに合格するために一生懸命勉強します。" },
      // 中2: 動名詞・There構文・疑問詞
      { sentence: "I enjoy ___ soccer.", answer: "playing", category: "動名詞", translation: "私はサッカーを楽しんでいます。" },
      { sentence: "___ is a cat in the garden.", answer: "There", category: "There構文", translation: "庭に猫がいます。" },
      { sentence: "___ is your name?", answer: "What", category: "疑問詞", translation: "あなたの名前は何ですか？" },
      { sentence: "She likes ___ songs.", answer: "singing", category: "動名詞", translation: "彼女は歌うのが好きです。" },
      { sentence: "___ do you live?", answer: "Where", category: "疑問詞", translation: "あなたはどこに住んでいますか？" },
      // 中3: 現在完了
      { sentence: "I ___ lived here for five years.", answer: "have", category: "現在完了", translation: "私はここに5年間住んでいます。" },
      { sentence: "She ___ been to Paris twice.", answer: "has", category: "現在完了", translation: "彼女はパリに2回行ったことがあります。" },
      { sentence: "We ___ just finished our homework.", answer: "have", category: "現在完了", translation: "私たちはちょうど宿題を終えました。" },
      { sentence: "He ___ lost his keys.", answer: "has", category: "現在完了", translation: "彼は鍵をなくしました。" },
      { sentence: "They ___ known each other since childhood.", answer: "have", category: "現在完了", translation: "彼らは子どもの頃からお互いを知っています。" },
      // 中3: 受動態
      { sentence: "This book ___ written by a famous author.", answer: "was", category: "受動態", translation: "この本は有名な作家によって書かれました。" },
      { sentence: "The room ___ cleaned every day.", answer: "is", category: "受動態", translation: "その部屋は毎日掃除されています。" },
      { sentence: "The cake ___ eaten by the children.", answer: "was", category: "受動態", translation: "そのケーキは子供たちに食べられました。" },
      { sentence: "English ___ spoken all over the world.", answer: "is", category: "受動態", translation: "英語は世界中で話されています。" },
      { sentence: "The house ___ be painted next week.", answer: "will", category: "受動態", translation: "その家は来週、塗装される予定です。" },
      // 中3: 関係代名詞
      { sentence: "This is the boy ___ helped me.", answer: "who", category: "関係代名詞", translation: "これは私を助けてくれた少年です。" },
      { sentence: "The book ___ I read was interesting.", answer: "which", category: "関係代名詞", translation: "私が読んだ本は面白かったです。" },
      { sentence: "She is the girl ___ bag is red.", answer: "whose", category: "関係代名詞", translation: "彼女はバッグが赤い女の子です。" },
      { sentence: "The park ___ we played is beautiful.", answer: "where", category: "関係代名詞", translation: "私たちが遊んだ公園は美しいです。" },
      { sentence: "I know the man ___ lives next door.", answer: "who", category: "関係代名詞", translation: "私は隣に住んでいる男性を知っています。" },
      // 中3: 間接疑問文・分詞
      { sentence: "I wonder ___ she lives.", answer: "where", category: "間接疑問文", translation: "彼女はどこに住んでいるのかな。" },
      { sentence: "The ___ cat is cute.", answer: "sleeping", category: "現在分詞", translation: "寝ている猫はかわいいです。" },
      { sentence: "The ___ chair is in the room.", answer: "broken", category: "過去分詞", translation: "壊れた椅子が部屋にあります。" },
      { sentence: "Do you know ___ time it is?", answer: "what", category: "間接疑問文", translation: "今何時か知っていますか？" },
      { sentence: "The ___ bird is beautiful.", answer: "singing", category: "現在分詞", translation: "歌っている鳥は美しいです。" },
      // 中3: 接続詞・仮定法
      { sentence: "I’ll call you ___ I have time.", answer: "if", category: "接続詞", translation: "時間があるときにあなたに電話します。" },
      { sentence: "___ I were rich, I would travel the world.", answer: "If", category: "仮定法", translation: "もし私がお金持ちだったら、世界中を旅します。" },
      { sentence: "She was tired, ___ she finished her work.", answer: "but", category: "接続詞", translation: "彼女は疲れていましたが、仕事を終えました。" },
      { sentence: "___ it rains, we won’t go out.", answer ENDPARTMENT
answer: "If", category: "仮定法", translation: "もし雨が降ったら、私たちは出かけません。" },
      { sentence: "I’ll help you ___ you need it.", answer: "because", category: "接続詞", translation: "あなたが必要なら、私は助けます。" }
    ];

    function playSound() {
      if (clickSound) {
        clickSound.currentTime = 0;
        clickSound.play().catch((e) => {
          console.warn("クリック音の再生に失敗しました:", e);
        });
      }
    }

    function startGame(gameId) {
      playSound();
      document.getElementById('home').style.display = 'none';
      const gameScreen = document.getElementById('gameScreen');
      gameScreen.classList.add('visible');

      const titles = {
        fillInBlank: '穴埋めタイムアタック',
        grammarSniper: '文法スナイパー',
        shuffleChallenge: '並び替えチャレンジ',
        trueFalse: '〇×判定ゲーム'
      };

      document.getElementById('gameTitle').innerText = titles[gameId];
      if (gameId === 'fillInBlank') {
        startFillInBlank();
      } else {
        document.getElementById('gameContent').innerText = `（ここに「${titles[gameId]}」の問題が表示されます）`;
      }
    }

    function goHome() {
      playSound();
      clearInterval(timerId);
      document.getElementById('gameScreen').classList.remove('visible');
      document.getElementById('home').style.display = 'block';
      resetGame();
    }

    function startFillInBlank() {
      score = 0;
      timeLeft = 60;
      document.getElementById('score').innerText = `スコア: ${score}`;
      document.getElementById('timer').innerText = `残り時間: ${timeLeft}秒`;
      document.getElementById('resultScreen').style.display = 'none';
      document.getElementById('answerInput').style.display = 'block';
      document.getElementById('answerInput').value = '';
      document.getElementById('feedback').innerText = '';
      document.querySelector('.game-button[onclick="checkAnswer()"]').style.display = 'block';
      nextQuestion();
      startTimer();
    }

    function nextQuestion() {
      const randomIndex = Math.floor(Math.random() * questions.length);
      currentQuestion = questions[randomIndex];
      document.getElementById('question').innerText = currentQuestion.sentence;
      document.getElementById('translation').innerText = `日本語訳: ${currentQuestion.translation}`;
      document.getElementById('category').innerText = `文法: ${currentQuestion.category}`;
      document.getElementById('answerInput').value = '';
      document.getElementById('answerInput').focus();
    }

    function checkAnswer() {
      playSound();
      const userAnswer = document.getElementById('answerInput').value.trim().toLowerCase();
      const correctAnswer = currentQuestion.answer.toLowerCase();
      const feedback = document.getElementById('feedback');

      if (userAnswer === correctAnswer) {
        score += 10;
        document.getElementById('score').innerText = `スコア: ${score}`;
        feedback.innerText = '正解！';
        feedback.style.color = 'green';
        setTimeout(() => {
          feedback.innerText = '';
          nextQuestion();
        }, 1000);
      } else {
        feedback.innerText = `不正解！正解は「${currentQuestion.answer}」です。`;
        feedback.style.color = 'var(--raspberry)';
        setTimeout(() => {
          feedback.innerText = '';
          nextQuestion();
        }, 1500);
      }
    }

    function startTimer() {
      timerId = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = `残り時間: ${timeLeft}秒`;
        if (timeLeft <= 0) {
          clearInterval(timerId);
          endGame();
        }
      }, 1000);
    }

    function endGame() {
      document.getElementById('question').innerText = '';
      document.getElementById('translation').innerText = '';
      document.getElementById('category').innerText = '';
      document.getElementById('answerInput').style.display = 'none';
      document.querySelector('.game-button[onclick="checkAnswer()"]').style.display = 'none';
      document.getElementById('feedback').innerText = '';
      document.getElementById('resultScreen').style.display = 'flex';
      document.getElementById('resultMessage').innerText = `ゲーム終了！あなたのスコアは ${score} 点（${score / 10} 問正解）です！`;
    }

    function resetGame() {
      score = 0;
      timeLeft = 60;
      currentQuestion = null;
      document.getElementById('score').innerText = `スコア: ${score}`;
      document.getElementById('timer').innerText = `残り時間: ${timeLeft}秒`;
      document.getElementById('question').innerText = '';
      document.getElementById('translation').innerText = '';
      document.getElementById('category').innerText = '';
      document.getElementById('answerInput').value = '';
      document.getElementById('feedback').innerText = '';
      document.getElementById('resultScreen').style.display = 'none';
      document.getElementById('answerInput').style.display = 'block';
      document.querySelector('.game-button[onclick="checkAnswer()"]').style.display = 'block';
    }

    // Enterキーで回答送信
    document.getElementById('answerInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        checkAnswer();
      }
    });
  </script>
</body>
</html>